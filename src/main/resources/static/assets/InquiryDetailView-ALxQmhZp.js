import{d as S,r as q,o as F,c as h,b as o,w as n,a as l,j as k,k as T,F as I,u as j,f,g as y,t as r,h as c,e as E,i as M,_ as R}from"./index-X4FfCd29.js";import{a as u}from"./authStore-IgGJ6nIm.js";import"./axios-upsvKRUO.js";const z={class:"title-display"},A={class:"comment-header"},G={class:"comment-author"},H={class:"comment-date"},J={class:"comment-content"},K={class:"comment-actions"},O=S({__name:"InquiryDetailView",props:{inquiryId:{}},setup(w){const d=w,C=j(),m=q({}),v=q([]),p=q(!1),$=()=>{p.value=!p.value};F(()=>{console.log(`상세화면입니다 >>> ${d.inquiryId}`),D(),g()});const D=()=>{u.get(`/inquiry/${d.inquiryId}`).then(t=>{m.value=t.data}).catch(t=>{console.error("상세 데이터를 불러오는 중 오류 발생:",t)})},g=()=>{u.get(`/inquiry/${d.inquiryId}/comment`).then(t=>{v.value=t.data}).catch(t=>{console.error("댓글 목록을 불러오는 중 오류 발생:",t)})},V=()=>{u.delete("/inquiry/"+d.inquiryId).then(t=>{console.log(t),C.push("/")}).catch(t=>{console.log(t)})},b=t=>{const e=new Date(t);return`${e.toLocaleDateString()} ${e.toLocaleTimeString()}`},x=(t,e)=>{const s=prompt("댓글을 수정하세요:",e);s!==null&&u.put(`/inquiry/comment/${t}`,{content:s}).then(()=>{alert("댓글이 수정되었습니다."),g()}).catch(i=>{console.error(i),alert("댓글 수정 중 오류가 발생했습니다.")})},B=t=>{confirm("댓글을 삭제하시겠습니까?")&&u.delete(`/inquiry/comment/${t}`).then(()=>{alert("댓글이 삭제되었습니다."),g()}).catch(e=>{console.error(e),alert("댓글 삭제 중 오류가 발생했습니다.")})};return(t,e)=>{const s=f("el-row"),i=f("el-col"),N=f("el-icon"),_=f("el-button");return y(),h(I,null,[o(s,{class:"my-3"},{default:n(()=>e[1]||(e[1]=[l("h1",null,"상세",-1)])),_:1}),l("div",null,[o(s,null,{default:n(()=>[o(i,null,{default:n(()=>[l("pre",z,r(m.value.title||"제목 없음"),1)]),_:1})]),_:1}),o(s,null,{default:n(()=>[o(i,{class:"content-display"},{default:n(()=>[c(r(m.value.content||"내용 없음"),1)]),_:1})]),_:1}),l("div",null,[o(s,null,{default:n(()=>[o(i,null,{default:n(()=>[l("div",{class:"comment-toggle",onClick:$},[l("span",null,"댓글 "+r(v.value.length)+"개",1),o(N,{name:p.value?"arrow-up":"arrow-down"},null,8,["name"])])]),_:1})]),_:1}),p.value?(y(),k(s,{key:0,class:"comment-list"},{default:n(()=>[(y(!0),h(I,null,E(v.value,a=>(y(),k(i,{key:a.id,class:"comment-item"},{default:n(()=>[l("div",A,[l("span",G,r(a.regId),1),l("span",H,r(b(a.regDt)),1)]),l("p",J,r(a.content),1),l("div",K,[o(_,{type:"default",onClick:L=>x(a.id,a.content)},{default:n(()=>e[2]||(e[2]=[c("수정")])),_:2},1032,["onClick"]),o(_,{type:"danger",onClick:L=>B(a.id)},{default:n(()=>e[3]||(e[3]=[c("삭제")])),_:2},1032,["onClick"])])]),_:2},1024))),128))]),_:1})):T("",!0)]),o(s,{class:"button-display"},{default:n(()=>[o(i,null,{default:n(()=>[o(_,{type:"primary",onClick:e[0]||(e[0]=a=>M(C).push({name:"editInquiry",params:{inquiryId:m.value.id}}))},{default:n(()=>e[4]||(e[4]=[c("수정")])),_:1}),o(_,{type:"info",onClick:V},{default:n(()=>e[5]||(e[5]=[c("삭제")])),_:1})]),_:1})]),_:1})])],64)}}}),W=R(O,[["__scopeId","data-v-c8121ade"]]);export{W as default};
