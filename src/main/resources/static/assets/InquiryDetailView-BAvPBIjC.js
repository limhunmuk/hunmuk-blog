import{d as E,e as g,f as M,o as _,g as w,a as o,w as n,h as l,c as I,k as $,F as h,u as R,r as y,t as u,b as c,i as U,j as z,_ as A}from"./index-Bu46FCoR.js";import{a as d}from"./authStore-eQVZia_j.js";import"./axios-upsvKRUO.js";const G={class:"title-display"},H={class:"comment-header"},J={class:"comment-author"},K={class:"comment-date"},O={class:"comment-content"},P={class:"comment-actions"},Q=E({__name:"InquiryDetailView",props:{inquiryId:{}},setup(V){const r=V,k=R(),f=g({}),v=g([]),q=g(!1),D=()=>{q.value=!q.value},m=g("");M(()=>{console.log(`상세화면입니다 >>> ${r.inquiryId}`),b(),C()});const b=()=>{d.get(`/inquiry/${r.inquiryId}`).then(t=>{f.value=t.data}).catch(t=>{console.error("상세 데이터를 불러오는 중 오류 발생:",t)})},C=()=>{d.get(`/inquiry/${r.inquiryId}/comment`).then(t=>{v.value=t.data}).catch(t=>{console.error("댓글 목록을 불러오는 중 오류 발생:",t)})},x=()=>{d.delete("/inquiry/"+r.inquiryId).then(t=>{console.log(t),k.push("/inquiry")}).catch(t=>{console.log(t)})},B=t=>{const e=new Date(t);return`${e.toLocaleDateString()} ${e.toLocaleTimeString()}`},N=()=>{if(m.value===""){alert("댓글을 입력하세요.");return}d.post(`/inquiry/${r.inquiryId}/comment`,{inquiryId:`${r.inquiryId}`,content:m.value}).then(()=>{alert("댓글이 등록되었습니다."),C(),m.value=""}).catch(t=>{console.error(t),alert("댓글 등록 중 오류가 발생했습니다.")})},L=(t,e)=>{const a=prompt("댓글을 수정하세요:",e);a!==null&&d.put(`/inquiry/comment/${t}`,{content:a}).then(()=>{alert("댓글이 수정되었습니다."),C()}).catch(i=>{console.error(i),alert("댓글 수정 중 오류가 발생했습니다.")})},S=t=>{confirm("댓글을 삭제하시겠습니까?")&&d.delete(`/inquiry/comment/${t}`).then(()=>{alert("댓글이 삭제되었습니다."),C()}).catch(e=>{console.error(e),alert("댓글 삭제 중 오류가 발생했습니다.")})};return(t,e)=>{const a=y("el-row"),i=y("el-col"),F=y("el-input"),p=y("el-button"),T=y("el-icon");return _(),w(h,null,[o(a,{class:"my-3"},{default:n(()=>e[2]||(e[2]=[l("h1",null,"문의 상세",-1)])),_:1}),l("div",null,[o(a,null,{default:n(()=>[o(i,null,{default:n(()=>[l("pre",G,u(f.value.title||"제목 없음"),1)]),_:1})]),_:1}),o(a,null,{default:n(()=>[o(i,{class:"content-display"},{default:n(()=>[c(u(f.value.content||"내용 없음"),1)]),_:1})]),_:1}),l("div",null,[o(a,null,{default:n(()=>[o(F,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),placeholder:"댓글을 입력하세요",class:"comment-input"},null,8,["modelValue"]),o(p,{type:"primary",onClick:N},{default:n(()=>e[3]||(e[3]=[c("등록")])),_:1})]),_:1}),o(a,null,{default:n(()=>[o(i,null,{default:n(()=>[l("div",{class:"comment-toggle",onClick:D},[l("span",null,"댓글 "+u(v.value.length)+"개",1),o(T,{name:q.value?"arrow-up":"arrow-down"},null,8,["name"])])]),_:1})]),_:1}),q.value?(_(),I(a,{key:0,class:"comment-list"},{default:n(()=>[(_(!0),w(h,null,U(v.value,s=>(_(),I(i,{key:s.id,class:"comment-item"},{default:n(()=>[l("div",H,[l("span",J,u(s.regId),1),l("span",K,u(B(s.regDt)),1)]),l("p",O,u(s.content),1),l("div",P,[o(p,{type:"default",onClick:j=>L(s.id,s.content)},{default:n(()=>e[4]||(e[4]=[c("수정")])),_:2},1032,["onClick"]),o(p,{type:"danger",onClick:j=>S(s.id)},{default:n(()=>e[5]||(e[5]=[c("삭제")])),_:2},1032,["onClick"])])]),_:2},1024))),128)),v.value.length===0?(_(),I(i,{key:0},{default:n(()=>e[6]||(e[6]=[l("p",null,"등록된 댓글이 없습니다.",-1)])),_:1})):$("",!0)]),_:1})):$("",!0)]),o(a,{class:"button-display"},{default:n(()=>[o(i,null,{default:n(()=>[o(p,{type:"primary",onClick:e[1]||(e[1]=s=>z(k).push({name:"editInquiry",params:{inquiryId:f.value.id}}))},{default:n(()=>e[7]||(e[7]=[c("수정")])),_:1}),o(p,{type:"info",onClick:x},{default:n(()=>e[8]||(e[8]=[c("삭제")])),_:1})]),_:1})]),_:1})])],64)}}}),Z=A(Q,[["__scopeId","data-v-5e0938a8"]]);export{Z as default};
