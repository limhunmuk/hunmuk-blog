import{a as c}from"./axios-upsvKRUO.js";import{l as i}from"./index-hz_xTI2V.js";const o=c.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{const r=localStorage.getItem("accessToken");return r&&(e.headers.Authorization=`Bearer ${r}`),e});o.interceptors.response.use(e=>e,async e=>{var t;const r=e.config;if(((t=e.response)==null?void 0:t.status)===401&&!r._retry){r._retry=!0;const s=localStorage.getItem("refreshToken");if(s)try{const n=(await c.post("/api/auth/refresh",{token:s})).data.accessToken;return localStorage.setItem("accessToken",n),r.headers.Authorization=`Bearer ${n}`,o(r)}catch(a){console.error("리프레시 토큰 만료:",a),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),alert("세션이 만료되었습니다. 다시 로그인해주세요.[로그인 페이지 이동]"),window.location.href="/login"}}else i.push({name:"login"})});export{o as a};
